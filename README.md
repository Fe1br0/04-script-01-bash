# Домашнее задание к занятию "4.1. Командная оболочка Bash: Практические навыки"


## Обязательная задача 1

#### Какие значения переменным c,d,e будут присвоены? Почему?

`Переменная c принимает значение "a+b" т.к. это мы при обьявлении переменной`

`Переменная d примет значение 1+2 т.к. она ссылается на переменные a и b , которые в свою очередь имеют значения 1 и 2 соответсвенно , но тип данных в них идет не числовой(в bash вообще нет типа данных у переменных) поэтому не происходит вычисления выражения`

`Переменная e принимает значение 3 , т.к. при использовании конструкции вида $((expression )) мы можем выполнять математические операции`

## Обязательная задача 2

#### На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным (после чего скрипт должен завершиться). В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить: 

`Не хватало ")" в конце выражения while ((1==1)) , добавил sleep 10 , чтобы проверка осуществлялась раз в 10 секунд , добавил условие выхода из безконечного цикла`

```
while (( 1 == 1 ))
    do
        curl https://localhost:4757
        if (($? != 0))
        then
            date >> curl.log
        else exit
        fi
        sleep 10
    done
 ``` 

## Обязательная задача 3

#### Необходимо написать скрипт, который проверяет доступность трёх IP: 192.168.0.1, 173.194.222.113, 87.250.250.242 по 80 порту и записывает результат в файл log. Проверять доступность необходимо пять раз для каждого узла.

```
#!/usr/bin/env bash
hosts=(192.168.0.1 173.194.222.113 87.250.250.24)
timeout=5
for i in {1..5}
do
date >>hosts.log
    for h in ${hosts[@]}
    do
	curl -Is --connect-timeout $timeout $h:80 >/dev/null
        echo "    check" $h status=$? >>hosts.log
    done
done

```

## Обязательная задача 4

#### Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается.

```
#!/usr/bin/env bash
host=(192.168.0.1 173.194.222.113 87.250.250.24)
timeout=5
res=0
for i in {1..3}
while (($res == 0))
do
    for h in ${hosts[@]}
    do
	curl -Is --connect-timeout $timeout $h:80 >/dev/null
	res=$?
	if (($res != 0))
	then
	    echo "Find error on " $h status=$res >>host2.log
	fi
    done
done

```

